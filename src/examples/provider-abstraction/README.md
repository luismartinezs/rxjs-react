Observable-based state with Provider